 <!DOCTYPE html>
 <html lang="en">
 <head>
   <title>Tutorial 8</title>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <script src="../../libs/jquery.min.js" type="text/javascript"></script>
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
 </head>
 <body>
   <div class="container">
       <form id="createmks" method="post">
           <div class="row">
               <div class="col-lg-6">
                   <div class="form-group">
                       <label for="term"> Term </label>
                       <select class="form-control" id="term" name="term">
                           <option> 2016 - Gasal </option>
                           <option> 2016 - Genap </option>
                           <option> 2016 - Pendek </option>
                       </select>
                   </div>
                   <div class="form-group">
                       <label for="mahasiswa"> Mahasiswa </label>
                       <select class="form-control" id="mahasiswa" name="mahasiswa">
                           <option> Andi </option>
                           <option> Budi </option>
                           <option> Ratih </option>
                       </select>
                   </div>
               </div>
               <div class="col-lg-6">
                   <div class="form-group">
                       <label for="jenismks"> Jenis MKS </label>
                       <select class="form-control" id="jenismks" name="jenismks">
                           <option> Skripsi </option>
                           <option> Tesis </option>
                           <option> Penelitian </option>
                       </select>
                   </div>
                   <div class="form-group">
                       <label for="judulmks"> Judul MKS </label>
                       <input type="text" class="form-control" id="judulmks"/>
                   </div>
               </div>
               <div class="col-lg-6">
                   <div class="form-group">
                       <label for="pembimbing1"> Pembimbing1 </label>
                       <select class="form-control" class="dosen" id="pembimbing1" name="pembimbing1">
                       </select>
                   </div>
                   <div class="form-group">
                       <label for="pembimbing2"> Pembimbing2 </label>
                       <select class="form-control" class="dosen" id="pembimbing2" name="pembimbing2">
                       </select>
                   </div>
                   <div class="form-group">
                       <label for="pembimbing3"> Pembimbing3 </label>
                       <select class="form-control" class="dosen" id="pembimbing3" name="pembimbing3">
                       </select>
                   </div>
               </div>
               <div class="col-lg-6">
                   <div id="penguji-wrapper">
                       <div class="form-group ">
                           <label for="penguji"> Penguji </label>
                           <select class="form-control" id="penguji" name="penguji">
                           </select>
                       </div>
                   </div>
                   <div id="tambah-penguji" class="btn btn-default"> Tambah penguji </div>
               </div>
           </div>
       </form>
   </div>
   <script type="text/javascript">
   var dosenList;
   var dosenOption;
   $.ajax({
        url : "../../request/mahasiswa.php",
        method : "GET",
        dataType : "JSON",
        data : {"action" : "get_mahasiswa"},
        success : function (response) {
            var data = response.data;
            var selectMahasiswa = $("#mahasiswa");
            selectMahasiswa.empty();
            for (var i = 0; i < data.length; i++) {
                selectMahasiswa.append('<option value=' + data[i].npm + '>' + data[i].nama + '</option>');
            }
        }
    });

    $.ajax({
         url : "../../request/jenismks.php",
         method : "GET",
         dataType : "JSON",
         data : {"action" : "get_jenismks"},
         success : function (response) {
             var data = response.data;
             var selectJenisMKS = $("#jenismks");
             selectJenisMKS.empty();
             for (var i = 0; i < data.length; i++) {
                 selectJenisMKS.append('<option value=' + data[i].ID + '>' + data[i].namamks + '</option>');
             }
         }
     });

     $.ajax({
          url : "../../request/dosen.php",
          method : "GET",
          dataType : "JSON",
          data : {"action" : "get_dosen"},
          success : function (response) {
              dosenList = response.data;
              var pembimbing1 = $("#pembimbing1");
              var pembimbing2 = $("#pembimbing2");
              var pembimbing3 = $("#pembimbing3");
              var penguji = $("#penguji");
              for (var i = 0; i < dosenList.length; i++) {
                  var option = '<option value=' + dosenList[i].nip + '>' + dosenList[i].nama + '</option>';
                  dosenOption += option;
                  pembimbing1.append(option);
                  pembimbing2.append(option);
                  pembimbing3.append(option);
                  penguji.append(option);
              }
          }
      });
      var x = 1;
      var pengujiWrapper = $("#penguji-wrapper");
      $("#tambah-penguji").click(function(){
          if (x < 3) {
              x++;
              var penguji = 'penguji' + x;
              var field = '<div class="form-group ">' +
                  '<label for="' + penguji + '">' + penguji + ' <btn class="btn btn-danger remove-penguji"> Hapus </button></label> ' +
                  '<select class="form-control" id="' + penguji + '" name="'+ penguji + '">' + dosenOption
                  '</select>' +
                  '</div>';
            pengujiWrapper.append(field);
          }
      });

      pengujiWrapper.on("click",".remove-penguji", function(e){
          console.log("remove");
          $(this).parent().parent().remove();
          x--;
    });


      </script>
 </body>
 </html
